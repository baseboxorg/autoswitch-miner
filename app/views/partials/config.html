<div class="col-md-12">
  <form name="config">
    <div class="row">
      <td><input type="checkbox" ng-model="configVm.config.cpu.autostart" ng-click="configVm.setConfig()">[CPU] Autostart Mining</td>
    </div>
    <div class="row">
      <div class="col-md-5 col-md-offset-1">
        <table class='table table-borderless'>
          <tr>
            <td>[CPU] Nicehash Region</td>
            <td>
              <select name="regionSelect" id="regionSelectCPU"
                      ng-options="region.id as region.name for region in configVm.config.regions"
                      ng-model="configVm.config.cpu.region" required></select>
            </td>
          </tr>
          <tr>
            <td>[CPU] Proxy</td>
            <td><input type="text" name="proxy" ng-model="configVm.config.cpu.proxy" size="32" placeholder="optional"></td>
          </tr>
          <tr>
            <td>[CPU] write Miner Log to file</td>
            <td><input type="checkbox" ng-model="configVm.config.cpu.writeMinerLog" ng-click="configVm.setConfig()"></td>
          </tr>
        </table>
      </div>

      <div class="col-md-5">
        <table class='table table-borderless'>
          <tr>
            <td>[CPU] BTC Address</td>
            <td><input type="text" name="btcAddress" ng-model="configVm.config.cpu.btcAddress" size="42" placeholder="required" required></td>
          </tr>
          <tr>
            <td>[CPU] binPath</td>
            <td><input type="text" name="binPath" ng-model="configVm.config.cpu.binPath" size="26" placeholder="path to miner bin" required></td>
          </tr>
          <tr>
            <td>[CPU] Cores</td>
            <td><input type="number" name="cores" ng-model="configVm.config.cpu.cores" placeholder="empty for all cores"></td>
          </tr>
        </table>
      </div>
    </div>

    <div class="row">
      <td><input type="checkbox" ng-model="configVm.config.gpu.autostart" ng-click="configVm.setConfig()">[GPU] Autostart Mining</td>
    </div>
    <div class="row">
      <div class="col-md-5 col-md-offset-1">
        <table class='table table-borderless'>
          <tr>
            <td>[GPU] Nicehash Region</td>
            <td>
              <select name="regionSelect" id="regionSelectGPU"
                      ng-options="region.id as region.name for region in configVm.config.regions"
                      ng-model="configVm.config.gpu.region" required></select>
            </td>
          </tr>
          <tr>
            <td>[GPU] Proxy</td>
            <td><input type="text" name="proxy" ng-model="configVm.config.gpu.proxy" size="32" placeholder="optional"></td>
          </tr>
          <tr>
            <td>[GPU] write Miner Log to file</td>
            <td><input type="checkbox" ng-model="configVm.config.gpu.writeMinerLog" ng-click="configVm.setConfig()"></td>
          </tr>
        </table>
      </div>

      <div class="col-md-5">
        <table class='table table-borderless'>
          <tr>
            <td>[GPU] BTC Address</td>
            <td><input type="text" name="btcAddress" ng-model="configVm.config.gpu.btcAddress" size="42" placeholder="required" required></td>
          </tr>
          <tr>
            <td>[GPU] binPath</td>
            <td><input type="text" name="binPath" ng-model="configVm.config.gpu.binPath" size="26" placeholder="path to miner bin" required></td>
          </tr>
        </table>
      </div>
    </div>

    <div>
      Rig Name: <input type="text" name="rigName" ng-model="configVm.config.rigName" size="8" placeholder="required" required>
    </div>
    <div>
      <a href="https://github.com/felixbrucker/profitability-service" target="_blank">Profitability-Service</a> URL: <input type="text" name="profitabilityServiceUrl" ng-model="configVm.config.profitabilityServiceUrl" size="26" placeholder="IP:PORT eg. 127.0.0.1:8081">
    </div>

    <div class="col-md-12">
      <br />
      <b>[CPU] Benchmarks:</b>
      <br />
      [CPU] Benchmark time: <input type="number" name="benchTime" ng-model="configVm.config.cpu.benchTime" placeholder="in seconds" required>
      <table class='table table-borderless'>
        <tr>
          <th>enabled</th>
          <th>algorithm</th>
          <th>benchmarked speed</th>
          <th>custom miner path</th>
          <th>override core count</th>
          <th>benchmark running</th>
        </tr>
        <tr ng-repeat="(key, algo) in configVm.config.benchmarks  track by $index">
          <td ng-if="algo.cpu!==undefined"><input type="checkbox" ng-model="algo.cpu.enabled" ng-click="configVm.setConfig()"></td>
          <td ng-if="algo.cpu!==undefined">{{key}}</td>
          <td ng-if="algo.cpu!==undefined"><input type="number" name="hashrate-{{key}}-CPU" ng-model="algo.cpu.hashrate" placeholder="hashrate"> KH/s</td>
          <td ng-if="algo.cpu!==undefined"><input type="text" name="binPath-{{key}}-CPU" ng-model="algo.cpu.binPath" placeholder="path to custom miner bin" size="26"></td>
          <td ng-if="algo.cpu!==undefined"><input type="number" name="cores-{{key}}-CPU" ng-model="algo.cpu.cores" placeholder="custom core count"></td>
          <td ng-if="algo.cpu!==undefined"><i ng-show="algo.cpu.benchRunning" class="fa fa-cog fa-spin fa-lg fa-fw"></i><span ng-show="algo.cpu.benchRunning" class="sr-only">Loading...</span><span ng-show="!algo.cpu.benchRunning">no</span></td>
        </tr>
      </table>
    </div>

    <div class="col-md-12">
      <br />
      <b>[GPU] Benchmarks:</b>
      <br />
      [GPU] Benchmark time: <input type="number" name="benchTime" ng-model="configVm.config.gpu.benchTime" placeholder="in seconds" required>
      <table class='table table-borderless'>
        <tr>
          <th>enabled</th>
          <th>algorithm</th>
          <th>benchmarked speed</th>
          <th>custom miner path</th>
          <th>extra Parameter</th>
          <th>benchmark running</th>
        </tr>
        <tr ng-repeat="(key, algo) in configVm.config.benchmarks  track by $index">
          <td ng-if="algo.gpu!==undefined"><input type="checkbox" ng-model="algo.gpu.enabled" ng-click="configVm.setConfig()"></td>
          <td ng-if="algo.gpu!==undefined">{{key}}</td>
          <td ng-if="algo.gpu!==undefined"><input type="number" name="hashrate-{{key}}-GPU" ng-model="algo.gpu.hashrate" placeholder="hashrate"> KH/s</td>
          <td ng-if="algo.gpu!==undefined"><input type="text" name="binPath-{{key}}-GPU" ng-model="algo.gpu.binPath" placeholder="path to custom miner bin" size="26"></td>
          <td ng-if="algo.gpu!==undefined"><input type="number" name="extraParam-{{key}}-GPU" ng-model="algo.gpu.extraParam" placeholder="extra Parameters"></td>
          <td ng-if="algo.gpu!==undefined"><i ng-show="algo.gpu.benchRunning" class="fa fa-cog fa-spin fa-lg fa-fw"></i><span ng-show="algo.gpu.benchRunning" class="sr-only">Loading...</span><span ng-show="!algo.gpu.benchRunning">no</span></td>
        </tr>
      </table>
    </div>

    <div class="col-md-12" style="margin-bottom: 10px;">
      <button type="button" class="btn btn-success" ng-disabled="config.$invalid" ng-click="configVm.setConfig()">Save
      </button>
      <i ng-show="configVm.waiting" class="fa fa-cog fa-spin fa-lg fa-fw"></i>
      <span class="sr-only">Loading...</span>
    </div>
  </form>
  <div style="margin-bottom: 10px;">
    <button ng-show="!configVm.waitingBenchmarkCPU" type="button" class="btn btn-success" ng-click="configVm.doBenchmark('cpu')">[CPU] Run Benchmark
    </button>
    <button ng-show="configVm.waitingBenchmarkCPU" type="button" class="btn btn-success" disabled>[CPU] Benchmark running..
    </button>
    <i ng-show="configVm.waitingBenchmarkCPU" class="fa fa-cog fa-spin fa-lg fa-fw"></i>
    <span class="sr-only">Loading...</span>
  </div>
  <div style="margin-bottom: 10px;">
    <button ng-show="!configVm.waitingBenchmarkGPU" type="button" class="btn btn-success" ng-click="configVm.doBenchmark('gpu')">[GPU] Run Benchmark
    </button>
    <button ng-show="configVm.waitingBenchmarkGPU" type="button" class="btn btn-success" disabled>[GPU] Benchmark running..
    </button>
    <i ng-show="configVm.waitingBenchmarkGPU" class="fa fa-cog fa-spin fa-lg fa-fw"></i>
    <span class="sr-only">Loading...</span>
  </div>
  <div style="margin-bottom: 10px;">
    <button ng-show="!configVm.updating" type="button" class="btn btn-success" ng-click="configVm.update()"><i class="fa fa-refresh" aria-hidden="true"></i> Git Pull
    </button>
    <button ng-show="configVm.updating" type="button" class="btn btn-success" disabled><i class="fa fa-refresh" aria-hidden="true"></i> update running..
    </button>
    <i ng-show="configVm.updating" class="fa fa-cog fa-spin fa-lg fa-fw"></i>
    <span class="sr-only">Loading...</span>
  </div>
  <div style="margin-bottom: 10px;">
    <button ng-show="!configVm.updatingMiner" type="button" class="btn btn-success" ng-click="configVm.updateMiner()"><i class="fa fa-refresh" aria-hidden="true"></i> Update Miner (only Linux)
    </button>
    <button ng-show="configVm.updatingMiner" type="button" class="btn btn-success" disabled><i class="fa fa-refresh" aria-hidden="true"></i> update running..
    </button>
    <i ng-show="configVm.updatingMiner" class="fa fa-cog fa-spin fa-lg fa-fw"></i>
    <span class="sr-only">Loading...</span>
  </div>
</div>
